<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>test</title>
  <script type="text/javascript" src="js/ncmb.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script>
  var ncmb = new NCMB("ae9a94ba04b5992c346d6ca8e4f48bf768f68aca8990cac6b0089548c6c15fcf", "e600590a0df9569c8f7773849a33e1032ff19c098cd15a9ce928f52429bd9fac");
  var onFormSend = function () {
    var fileName = document.getElementById("file-name").value;
    var fileData = document.getElementById("file-data").files[0];

    ncmb.File.upload(fileName, fileData)
      .then(function (res) {
        // アップロード後処理
        alert('アップロードできました');
      })
      .catch(function (err) {
        // エラー処理
        alert('アップロード失敗');
      });
  }
</script>
<script>
  var reader = new FileReader();
  reader.onload = function (e) {
    var dataUrl = reader.result;
    document.getElementById("image").src = dataUrl;
  }

  function downloadImage() {
    var name = document.getElementById("id_textBox1").value
    // ファイル名からファイルを取得
    var fileName = name;

    // ダウンロード（データ形式をblobを指定）
    ncmb.File.download(fileName, "blob")
      .then(function (blob) {
        // ファイルリーダーにデータを渡す
        reader.readAsDataURL(blob);
      })
      .catch(function (err) {
        console.error(err);
      })
  }
</script>
<script>
  $(function () {
    $("#nav").load("nav.html");
  });
</script>

<body>
  <nav id="nav" class="navbar navbar-expand-md navbar-dark bg-dark">
  </nav>
  <p>
    name <input type="text" id="file-name" />
  </p>
  <p>
    file <input type="file" id="file-data" />
  </p>
  <button onClick="onFormSend()">send</button>

  <body>
    <input name="textBox1" id="id_textBox1" type="text" value="" />
    <img src="" id="image" width="200" height="200" />
    <input type="submit" value="画像表示" id="view" onclick="downloadImage();" />
  </body>

</body>

</html>
<script>


  ncmb.File.equalTo("fileName")
    .order("fileName ", true)
    .fetchAll()
    .then(function (files) {
      // 検索後処理
      console.log(files)
    })
    .catch(function (err) {
      // エラー処理
    });


</script>